webpackJsonp([19],{okEf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Ymiw"),i={name:"functionList",data:function(){return{allDisabled:!0,searchKey:null,list:[],pager:{pageNum:1,pageSize:10,loading:!0}}},methods:{add:function(){var t=this;this.$axios.get("/comm/getNewId").then(function(e){e.data.status==ResultStatus.OK.key&&t.$router.push({path:"/admin/functionEdit",query:{id:e.data.value}})})},edit:function(t){this.$router.push({path:"/admin/functionEdit",query:{id:t.functionId}})},search:function(){this.goPage(1)},queryList:function(){var t=this;t.pager.loading=!0,t.allDisabled=!0,this.$axios.get("/function/queryPageList",{name:t.searchKey,pageNum:t.pager.pageNum,pageSize:t.pager.pageSize}).then(function(e){if(e.data.status==ResultStatus.OK.key){t.list=e.data.value.list,t.pager=s.a.getPagerInfo(e.data.value,t.goPage);var a={pageNum:t.pager.pageNum,pageSize:t.pager.pageSize,filter:{searchKey:t.searchKey}};s.a.setPagerModel("functionList",a)}t.allDisabled=!1})},goPage:function(t){this.pager.pageNum=t,this.queryList()},deleteItem:function(t){var e=this;this.$confirm.confirm("确定要删除功能吗？",function(){e.$axios.get("/function/delete",{id:t.functionId}).then(function(t){t.data.status==ResultStatus.OK.key&&(e.$toaster.success("删除成功！"),e.queryList())})})},permissionList:function(t){this.$router.push({path:"/admin/permissionList",query:{functionId:t.functionId}})}},mounted:function(){var t=s.a.getPagerModel("functionList");this.pager.pageNum=t.pageNum,this.pager.pageSize=t.pageSize,this.searchKey=t.filter.searchKey,this.queryList()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"maincontent listcontent"},[a("div",{staticClass:"list-header-but-group"},[a("button",{directives:[{name:"authcode",rawName:"v-authcode",value:"functionList_add",expression:'"functionList_add"'}],staticClass:"btn btn-outline-purple",attrs:{type:"button inline-block"},on:{click:function(e){t.add()}}},[a("i",{staticClass:"fa fa-plus mr5"}),t._v("添加\n    ")])]),t._v(" "),a("div",{staticClass:"searchbar"},[a("form",{staticClass:"myform form-inline form-group-w250 form-label-w80"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[t._v("名称：")]),t._v(" "),a("div",{staticClass:"form-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"form-control",attrs:{type:"text",placeholder:"名称",autofocus:""},domProps:{value:t.searchKey},on:{input:function(e){e.target.composing||(t.searchKey=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-purple ml20",attrs:{type:"button",disabled:t.allDisabled},on:{click:function(e){t.search()}}},[a("i",{staticClass:"fa fa-search mr5"}),t._v("搜索\n        ")])])])]),t._v(" "),a("div",{staticClass:"table-list"},[a("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),t.pager.loading?t._e():a("tbody",t._l(t.list,function(e,s){return a("tr",[a("td",{staticClass:"text-center",domProps:{textContent:t._s((t.pager.pageNum-1)*t.pager.pageSize+s+1)}}),t._v(" "),a("td",[a("a",{staticClass:"block w100p h100p",attrs:{href:"javascript:void(0)"},domProps:{textContent:t._s(e.name)},on:{click:function(a){t.edit(e)}}})]),t._v(" "),a("td",{domProps:{textContent:t._s(e.code)}}),t._v(" "),a("td",{domProps:{textContent:t._s(e.menuName)}}),t._v(" "),a("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.path,expression:"item.path"}],domProps:{textContent:t._s(e.path)}}),t._v(" "),a("td",{staticClass:"text-center",domProps:{textContent:t._s(e.seq)}}),t._v(" "),a("td",{staticClass:"operate"},[a("a",{directives:[{name:"authcode",rawName:"v-authcode",value:"functionList_grant",expression:'"functionList_grant"'}],staticClass:"inline-block mybtn",attrs:{href:"javascript:void(0)",title:"授权"},on:{click:function(a){t.permissionList(e)}}},[a("i",{staticClass:"fa fa-id-badge c66c"})]),t._v(" "),a("a",{directives:[{name:"authcode",rawName:"v-authcode",value:"functionList_delete",expression:'"functionList_delete"'}],staticClass:"inline-block mybtn",attrs:{href:"javascript:void(0)",title:"删除"},on:{click:function(a){t.deleteItem(e)}}},[a("i",{staticClass:"fa fa-trash cf05"})])])])}))]),t._v(" "),a("table-list-loading",{attrs:{list:t.list,loading:t.pager.loading}})],1),t._v(" "),a("div",{staticClass:"footer-pager"},[a("pagination",{attrs:{"pager-info":t.pager}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"w50"},[t._v("#")]),t._v(" "),a("th",{},[t._v("名称")]),t._v(" "),a("th",{staticClass:"w150"},[t._v("编码")]),t._v(" "),a("th",{staticClass:"w120"},[t._v("菜单")]),t._v(" "),a("th",{staticClass:"w150"},[t._v("路径")]),t._v(" "),a("th",{staticClass:"w50"},[t._v("序号")]),t._v(" "),a("th",{staticClass:"w100"},[t._v("操作")])])])}]},o=a("VU/8")(i,n,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=19.81e7173393ee45df7f50.js.map