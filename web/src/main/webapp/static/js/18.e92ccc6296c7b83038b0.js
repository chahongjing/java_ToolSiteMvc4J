webpackJsonp([18],{"3RCs":function(t,s){},K4Gu:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Ymiw"),o={name:"userList",inject:["reload"],data:function(){return{allDisabled:!0,searchKey:null,list:[],sexValue:"",sexList:[],nameOrderBy:{value:enumMap.OrderByType.ASC.key},codeOrderBy:{value:null},createdOnOrderBy:{value:null},pager:{pageNum:1,pageSize:5,loading:!0},showChangePasswordDialog:!1,userCode:null,password:null,YesNo:enumMap.YesNo,Sex:enumMap.Sex,modalOpt:{width:"350px"},bigModalOpt:{width:"1000px"},showHitoryDialog:!1,historyItem:null,historyList:[],historyPager:{pageNum:1,pageSize:10,loading:!0}}},methods:{reloadPage:function(){this.reload()},add:function(){var t=this;this.$axios.get("/comm/getNewId").then(function(s){s.data.status==ResultStatus.OK.key&&t.$router.push({path:"/kvConfig/edit",query:{id:s.data.value}})})},edit:function(t){this.$router.push({path:"/kvConfig/edit",query:{id:t.id}})},search:function(){this.goPage(1)},queryList:function(){var t=this;t.allDisabled=!0,t.pager.loading=!0,this.$axios.get("/kvConfig/queryPageList",{userName:this.searchKey,sex:this.sexValue,pageNum:this.pager.pageNum,pageSize:this.pager.pageSize,nameOrderBy:this.nameOrderBy.value,codeOrderBy:this.codeOrderBy.value,createdOnOrderBy:this.createdOnOrderBy.value}).then(function(s){s.data.status==ResultStatus.OK.key?(t.list=s.data.value.list,t.pager=e.a.getPagerInfo(s.data.value,t.goPage)):t.pager.loading=!1,t.allDisabled=!1})},goPage:function(t){this.pager.pageNum=t,this.queryList()},queryHistoryList:function(){var t=this;t.allDisabled=!0,t.historyPager.loading=!0,this.$axios.get("/kvConfigLog/queryPageList",{pageNum:this.historyPager.pageNum,pageSize:this.historyPager.pageSize,kvId:this.historyItem.id}).then(function(s){s.data.status==ResultStatus.OK.key?(t.historyList=s.data.value.list,t.historyPager=e.a.getPagerInfo(s.data.value,t.goHistoryPage)):t.historyPager.loading=!1,t.allDisabled=!1})},goHistoryPage:function(t){this.historyPager.pageNum=t,this.queryHistoryList()},deleteItem:function(t){var s=this;this.$confirm.confirm("确定要删除键值对吗？",function(){s.$axios.get("/kvConfig/delete",{id:t.id}).then(function(t){t.data.status==ResultStatus.OK.key&&(s.$toaster.success("删除成功！"),s.queryList())})})},showHistory:function(t){this.showHitoryDialog=!0,this.historyItem=t,this.queryHistoryList()},removeAllCache:function(){var t=this;this.$confirm.confirm("确定要清除所有缓存吗？",function(){t.$axios.get("/kvConfig/removeAllCache").then(function(s){s.data.status==ResultStatus.OK.key&&t.$toaster.success("清除所有缓存成功！")})})}},mounted:function(){this.search()},components:{commonModal:a("RH64").a}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"maincontent listcontent"},[a("div",{staticClass:"list-header-but-group"},[a("button",{directives:[{name:"authcode",rawName:"v-authcode",value:"userList_add",expression:'"userList_add"'}],staticClass:"btn btn-outline-purple",attrs:{type:"button inline-block"},on:{click:function(s){t.add()}}},[a("i",{staticClass:"fa fa-plus fa-plus-myrotate mr5"}),t._v("添加\n      ")]),t._v(" "),a("button",{directives:[{name:"authcode",rawName:"v-authcode",value:"userList_add",expression:'"userList_add"'}],staticClass:"btn btn-outline-purple",attrs:{type:"button inline-block"},on:{click:function(s){t.removeAllCache()}}},[a("i",{staticClass:"fa fa-plus fa-plus-myrotate mr5"}),t._v("清除所有缓存\n      ")])]),t._v(" "),a("div",{staticClass:"searchbar"},[a("form",{staticClass:"myform form-inline form-group-w280 form-label-w80"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label colon"},[t._v("键")]),t._v(" "),a("div",{staticClass:"form-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"form-control",attrs:{type:"text",placeholder:"键",autofocus:""},domProps:{value:t.searchKey},on:{input:function(s){s.target.composing||(t.searchKey=s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group btn100"},[a("button",{staticClass:"btn btn-purple ml20",attrs:{type:"button",disabled:t.allDisabled},on:{click:function(s){t.search()}}},[a("i",{staticClass:"fa fa-search mr5"}),t._v("搜索\n          ")])])])]),t._v(" "),a("div",{staticClass:"table-list"},[a("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),t.pager.loading?t._e():a("tbody",t._l(t.list,function(s,e){return a("tr",[a("td",{staticClass:"text-center",domProps:{textContent:t._s((t.pager.pageNum-1)*t.pager.pageSize+e+1)}}),t._v(" "),a("td",[a("a",{staticClass:"block w100p h100p",attrs:{href:"javascript:void(0)"},domProps:{textContent:t._s(s.code)},on:{click:function(a){t.edit(s)}}})]),t._v(" "),a("td",{domProps:{textContent:t._s(s.value)}}),t._v(" "),a("td",{domProps:{textContent:t._s(s.memo)}}),t._v(" "),a("td",{staticClass:"text-center",domProps:{textContent:t._s(t.$options.filters.formatDate(s.createTime))}}),t._v(" "),a("td",{staticClass:"operate"},[a("a",{staticClass:"inline-block mybtn",attrs:{href:"javascript:void(0)",title:"删除"},on:{click:function(a){t.deleteItem(s)}}},[a("i",{staticClass:"fa fa-trash cf05"})]),t._v(" "),a("a",{staticClass:"inline-block mybtn",attrs:{href:"javascript:void(0)",title:"操作记录"},on:{click:function(a){t.showHistory(s)}}},[a("i",{staticClass:"fa fa-history c9c0"})])])])}))]),t._v(" "),a("table-list-loading",{attrs:{list:t.list,loading:t.pager.loading}})],1),t._v(" "),a("div",{staticClass:"footer-pager"},[a("pagination",{attrs:{"pager-info":t.pager}})],1),t._v(" "),a("common-modal",{attrs:{"show-modal":t.showChangePasswordDialog,options:t.modalOpt}},[a("div",{staticClass:"modal-header",attrs:{slot:"headerSlot"},slot:"headerSlot"},[a("h5",{staticClass:"modal-title"},[t._v("修改密码")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(s){t.showChangePasswordDialog=!1}}},[a("span",{staticClass:"closeicon",attrs:{title:"关闭"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body pr20",attrs:{slot:"bodySlot"},slot:"bodySlot"},[a("form",{staticClass:"myform form-label-w100 block-form-group"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label req colon"},[t._v("新密码")]),t._v(" "),a("div",{staticClass:"form-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"focus",rawName:"v-focus"}],staticClass:"form-control",attrs:{type:"password",placeholder:"新密码",autofocus:""},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-info"},[a("i",{staticClass:"fa"})])])])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"footerSlot"},slot:"footerSlot"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(s){t.showChangePasswordDialog=!1}}},[a("i",{staticClass:"fa fa-times"}),a("span",[t._v("取消")])]),t._v(" "),a("button",{staticClass:"btn btn-purple",attrs:{type:"button"},on:{click:function(s){t.changePassword()}}},[a("i",{staticClass:"fa fa-check"}),a("span",[t._v("确定")])])])]),t._v(" "),a("common-modal",{attrs:{"show-modal":t.showHitoryDialog,options:t.bigModalOpt}},[a("div",{staticClass:"modal-header",attrs:{slot:"headerSlot"},slot:"headerSlot"},[a("h5",{staticClass:"modal-title"},[t._v("历史记录")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(s){t.showHitoryDialog=!1}}},[a("span",{staticClass:"closeicon",attrs:{title:"关闭"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body pr20",attrs:{slot:"bodySlot"},slot:"bodySlot"},[a("div",{staticClass:"table-list",staticStyle:{"min-height":"300px"}},[a("table",{staticClass:"table table-hover"},[a("thead",[a("tr",[a("th",{staticClass:"w50"},[t._v("#")]),t._v(" "),a("th",{staticClass:"w150"},[t._v("键")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",{staticClass:"w120"},[t._v("操作人")]),t._v(" "),a("th",{staticClass:"w155"},[t._v("创建时间")])])]),t._v(" "),t.historyPager.loading?t._e():a("tbody",t._l(t.historyList,function(s,e){return a("tr",[a("td",{staticClass:"text-center",domProps:{textContent:t._s((t.historyPager.pageNum-1)*t.historyPager.pageSize+e+1)}}),t._v(" "),a("td",{domProps:{textContent:t._s(s.code)}}),t._v(" "),a("td",{domProps:{textContent:t._s(s.value)}}),t._v(" "),a("td",{domProps:{textContent:t._s(s.createByName)}}),t._v(" "),a("td",{staticClass:"text-center",domProps:{textContent:t._s(t.$options.filters.formatDate(s.createTime))}})])}))]),t._v(" "),a("div",{staticClass:"footer-pager"},[a("pagination",{attrs:{"pager-info":t.historyPager}})],1)])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"footerSlot"},slot:"footerSlot"},[a("button",{staticClass:"btn btn-purple",attrs:{type:"button"},on:{click:function(s){t.showHitoryDialog=!1}}},[a("i",{staticClass:"fa fa-times"}),a("span",[t._v("关闭")])])])])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",{staticClass:"w50"},[t._v("#")]),t._v(" "),a("th",{staticClass:"w200"},[t._v("键")]),t._v(" "),a("th",{staticClass:"w200"},[t._v("值")]),t._v(" "),a("th",[t._v("备注")]),t._v(" "),a("th",{staticClass:"w155"},[t._v("创建时间")]),t._v(" "),a("th",{staticClass:"w100"},[t._v("操作")])])])}]};var r=a("VU/8")(o,i,!1,function(t){a("3RCs")},"data-v-083ab586",null);s.default=r.exports}});
//# sourceMappingURL=18.e92ccc6296c7b83038b0.js.map