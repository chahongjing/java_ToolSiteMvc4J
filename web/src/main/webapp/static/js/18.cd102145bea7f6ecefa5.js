webpackJsonp([18],{"7/bw":function(e,s){},cyro:function(e,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=i("mvHQ"),n=i.n(t),c={name:"roleGrantPermission",data:function(){return{list:[{id:null,name:null,relativeId:null,isCheck:!1,singleCheck:!1,type:null,subList:[{id:null,name:null,relativeId:null,isCheck:!1,singleCheck:!1,type:null,subList:[{id:null,name:null,relativeId:null,isCheck:!1,singleCheck:!1,type:null,subList:[{id:null,name:null,relativeId:null,isCheck:!1,singleCheck:!1,type:null,subList:[]}]}]}]}]}},methods:{goBack:function(){this.$root.goBack()},getRolePermission:function(e){var s=this;this.$axios.get("/rolePermission/getRolePermission",{id:e}).then(function(e){e.data.status==ResultStatus.OK.key&&(s.list=e.data.value,s.refreshCheckbox())})},save:function(e){this.refreshCheckbox();var s=[e];this.$axios.post("/rolePermission/savePermission",{listStr:n()(s)}).then(function(e){e.data.status,ResultStatus.OK.key})},saveGroup:function(e){var s=[e];this.checkChildren(e,e.subList,s),this.refreshCheckbox(),this.$axios.post("/rolePermission/savePermission",{listStr:n()(s)}).then(function(e){e.data.status,ResultStatus.OK.key})},refreshCheckbox:function(){if(this.list)for(var e=0;e<this.list.length;e++){var s=this.list[e];1==this.getChildrenStatus(s.subList)?s.isCheck=!0:s.isCheck=!1}},getChildrenStatus:function(e){if(!e||0==e.length)return 0;for(var s=[],i=0;i<e.length;i++){var t=e[i];t.subList&&0!=t.subList.length?(s.push(this.getChildrenStatus(t.subList)),1==s[s.length-1]?t.isCheck=!0:t.isCheck=!1):s.push(t.isCheck?1:-1)}return 0==s.length?0:s.some(function(e){return-1==e})?-1:1},checkChildren:function(e,s,i){if(s&&0!=s.length)for(var t=0;t<s.length;t++)s[t].type==enumMap.PermissionType.Permission.key?s[t].isCheck!==e.isCheck&&(i.push(s[t]),s[t].isCheck=e.isCheck,this.checkChildren(s[t],s[t].subList,i)):s[t].isCheck!=enumMap.PermissionType.Permission.key&&(s[t].isCheck=e.isCheck,this.checkChildren(s[t],s[t].subList,i))}},mounted:function(){this.getRolePermission(this.$route.query.id)}},a={render:function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"maincontent"},[i("div",{staticClass:"w100p h100p oxh oya"},e._l(e.list,function(s){return i("div",{staticClass:"mypanel"},[i("div",{staticClass:"panel-heading font-bold",class:{noboderbottom:0==s.subList.length||!s.showDetail}},[i("label",{staticClass:"radio_checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.singleCheck,expression:"firstMenu.singleCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.singleCheck)?e._i(s.singleCheck,null)>-1:s.singleCheck},on:{change:[function(i){var t=s.singleCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"singleCheck",t.concat([null])):a>-1&&e.$set(s,"singleCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"singleCheck",c)},function(i){e.save(s)}]}}),e._v(" "),i("i"),e._v(" "),i("span",{domProps:{textContent:e._s(s.name+" 菜单")}})]),e._v(" "),i("div",{staticClass:"inline-block fr"},[i("label",{staticClass:"radio_checkbox checkall"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.isCheck,expression:"firstMenu.isCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.isCheck)?e._i(s.isCheck,null)>-1:s.isCheck},on:{change:[function(i){var t=s.isCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"isCheck",t.concat([null])):a>-1&&e.$set(s,"isCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"isCheck",c)},function(i){e.saveGroup(s)}]}}),e._v(" "),i("i"),e._v(" "),i("span",[e._v("全选")])]),e._v(" "),i("i",{staticClass:"fa showdetailarray",class:{"fa-chevron-up":s.showDetail,"fa-chevron-down":!s.showDetail},on:{click:function(e){s.showDetail=!s.showDetail}}})])]),e._v(" "),s.subList.length>0?i("div",{staticClass:"panel-body",class:{hidedetail:!s.showDetail}},e._l(s.subList,function(s){return i("div",{staticClass:"mypanel subpanel"},[i("div",{staticClass:"panel-heading font-bold",class:{noboderbottom:0==s.subList.length||!s.showDetail}},[i("label",{staticClass:"radio_checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.singleCheck,expression:"secondMenu.singleCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.singleCheck)?e._i(s.singleCheck,null)>-1:s.singleCheck},on:{change:[function(i){var t=s.singleCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"singleCheck",t.concat([null])):a>-1&&e.$set(s,"singleCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"singleCheck",c)},function(i){e.save(s)}]}}),e._v(" "),i("i"),e._v(" "),i("span",{domProps:{textContent:e._s(s.name+" 菜单")}})]),e._v(" "),i("div",{staticClass:"inline-block fr"},[i("label",{staticClass:"radio_checkbox checkall"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.isCheck,expression:"secondMenu.isCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.isCheck)?e._i(s.isCheck,null)>-1:s.isCheck},on:{change:[function(i){var t=s.isCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"isCheck",t.concat([null])):a>-1&&e.$set(s,"isCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"isCheck",c)},function(i){e.saveGroup(s)}]}}),e._v(" "),i("i"),e._v(" "),i("span",[e._v("全选")])]),e._v(" "),i("i",{staticClass:"fa showdetailarray",class:{"fa-chevron-up":s.showDetail,"fa-chevron-down":!s.showDetail},on:{click:function(e){s.showDetail=!s.showDetail}}})])]),e._v(" "),s.subList.length>0?i("div",{staticClass:"panel-body",class:{hidedetail:!s.showDetail}},e._l(s.subList,function(s){return i("div",{staticClass:"mypanel subpanel"},[i("div",{staticClass:"panel-heading font-bold",class:{noboderbottom:0==s.subList.length||!s.showDetail}},[i("label",{staticClass:"radio_checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.singleCheck,expression:"functionItem.singleCheck"}],attrs:{type:"checkbox",disabled:""},domProps:{checked:Array.isArray(s.singleCheck)?e._i(s.singleCheck,null)>-1:s.singleCheck},on:{change:[function(i){var t=s.singleCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"singleCheck",t.concat([null])):a>-1&&e.$set(s,"singleCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"singleCheck",c)},function(i){e.save(s)}]}}),e._v(" "),i("i",{staticStyle:{display:"none"}}),e._v(" "),i("span",{staticStyle:{"margin-left":"0"},domProps:{textContent:e._s(s.name)}})]),e._v(" "),i("div",{staticClass:"inline-block fr"},[i("label",{staticClass:"radio_checkbox checkall"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.isCheck,expression:"functionItem.isCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.isCheck)?e._i(s.isCheck,null)>-1:s.isCheck},on:{change:[function(i){var t=s.isCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"isCheck",t.concat([null])):a>-1&&e.$set(s,"isCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"isCheck",c)},function(i){e.saveGroup(s)}]}}),e._v(" "),i("i"),e._v(" "),i("span",[e._v("全选")])]),e._v(" "),i("i",{staticClass:"fa showdetailarray",class:{"fa-chevron-up":s.showDetail,"fa-chevron-down":!s.showDetail},on:{click:function(e){s.showDetail=!s.showDetail}}})])]),e._v(" "),s.subList.length>0?i("div",{staticClass:"panel-body",class:{hidedetail:!s.showDetail}},e._l(s.subList,function(s){return i("label",{staticClass:"radio_checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.isCheck,expression:"permission.isCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.isCheck)?e._i(s.isCheck,null)>-1:s.isCheck},on:{change:[function(i){var t=s.isCheck,n=i.target,c=!!n.checked;if(Array.isArray(t)){var a=e._i(t,null);n.checked?a<0&&e.$set(s,"isCheck",t.concat([null])):a>-1&&e.$set(s,"isCheck",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(s,"isCheck",c)},function(i){e.save(s)}]}}),e._v(" "),i("i"),e._v(" "),i("span",{domProps:{textContent:e._s(s.name)}})])})):e._e()])})):e._e()])})):e._e()])}))])},staticRenderFns:[]};var l=i("VU/8")(c,a,!1,function(e){i("7/bw")},"data-v-13eb3a02",null);s.default=l.exports}});
//# sourceMappingURL=18.cd102145bea7f6ecefa5.js.map